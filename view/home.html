<div class="doca" ng-if="!loading">
    <custom-header 
      search-query="searchQuery"
      create-post="createPost()"
      open-login-register-modal="openLoginRegisterModal()"
      open-user-profile-modal="openUserProfileModal()"
      is-logged="isLogged">
    </custom-header>

    <div class="doca-w-1/3 doca-mx-auto doca-mt-32">
      <div class="doca-flex doca-items-center doca-justify-start">
        <div class="doca-flex-col">
          <div class="doca-flex">
            <button
              class="doca-button doca-button--large doca-button--tertiary">
              <i class="doca-icon doca-icon__plus doca-icon--extra-large" ></i>
            </button>   
            <button class="doca-button doca-button--large doca-button--tertiary" style="font-size: 18px;">
              For you
            </button>
            <button class="doca-button doca-button--large doca-button--tertiary"  style="font-size: 18px;">
              Following
            </button>
          </div>
        </div>
      </div>
    
      <div class="doca-flex doca-items-center doca-justify-center">
        <hr class="doca-separator doca-w-full" />
      </div>
    </div>
  
    <div class="doca-flex doca-items-center doca-justify-center">
        <div ng-if="posts.length > 0" class="doca-w-full">
            <div class="doca-card__container doca-mt-8 doca-flex doca-items-center doca-flex-col doca-justify-center doca-mx-auto doca-w-1/3"      ng-repeat="post in posts | filter:searchQuery">
                <div class="doca-flex doca-items-start doca-w-full">
                    <i class="doca-icon doca-icon__circle-user doca-icon--solid doca-icon--large doca-mt-1"></i>
                    <p class="doca-card__title doca-text--normal doca-text--large" >
                        {{ post.user.name }} 
                    </p>
                </div>
                <div class="doca-card doca-card--borderless doca-flex doca-mt-4 doca-justify-between doca-items-start doca-h-auto">
                    <div class="doca-card__content doca-pl-0 doca-items-center doca-pt-0 doca-h-64" style="width: 400px;">
                        <p class="doca-card__title doca-text--normal doca-text--extra-large doca-mb-8" style="font-size: 22px; line-height:30px;">
                            {{ truncate(post.title, 150) }}
                        </p>
                        <p class="doca-card__subtitle doca-mb-8 doca-text--normal doca-text--large">
                            {{ truncate(post.content, 115) }}
                        </p>
                        <div class="doca-flex doca-justify-between">
                            <div class="doca-flex doca-items-center">
                                <p class="doca-text--normal doca-text--large">
                                    {{ post.formattedDate }}
                                </p>
                                <div class="doca-ml-2">
                                    <button
                                        class="doca-button doca-button--large doca-button--tertiary"
                                        ng-click="likePost(post)">
                                        <i class="doca-icon" ng-class="post.isLikedByUser ? 'doca-icon__hands doca-icon--solid' : 'doca-icon__hands'"></i>
                                        <p class="doca-text--large">{{ post.total_likes }}</p>
                                    </button>
        
                                    <button
                                        class="doca-button doca-button--large doca-button--tertiary">
                                        <i class="doca-icon doca-icon__comments doca-icon--large"></i>
                                        <p class="doca-text--large">99K</p>
                                    </button>                           
                                </div>
                            </div>
                            <div class="doca-flex doca-items-center">
                                <button
                                    class="doca-button doca-button--large doca-button--tertiary">
                                    <i class="doca-icon doca-icon__circle-minus doca-icon--large" ></i>
                                </button>  
                                <button
                                    class="doca-button doca-button--large doca-button--tertiary">
                                    <i class="doca-icon doca-icon__flag doca-icon--large" ></i>
                                </button>  
                                <button
                                    class="doca-button doca-button--large doca-button--tertiary">
                                    <i class="doca-icon doca-icon__ellipsis doca-icon--large" ></i>
                                </button>  
                            </div>
                        </div>
                    </div>
                    <div class="doca-card__image-container doca-w-1/3">
                    <img
                        alt="Imagem card"
                        class="doca-card__image"
                        src="https://i.ytimg.com/vi/aX0vT_oFmTk/maxresdefault.jpg"
                    />
                    </div>
                </div>
                <hr class="doca-separator doca-w-full" />
            </div>
        </div>
        
        <div ng-if="posts.length === 0">
            <p>Não há posts para exibir.</p>
        </div>
    </div>
</div>

<div ng-if="loading">
    <p>Carregando posts</p>
</div>
